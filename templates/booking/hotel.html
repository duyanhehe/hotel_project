{% extends "main.html" %}

{% block content %}

<div class="container py-4">
    <form method="POST">
        <div class="form-group">
            <label for="city">Select City:</label>
            <select class="form-control" id="city" name="city">
                <option value="">All Cities</option>
                {% if hotels: %}
                {% for hotel in hotels %}
                <option value="{{ hotel[1] }}" {% if selected_city == hotel[1] %} selected {% endif %} >{{ hotel[1] }}</option>
                {% endfor %}
                {% endif %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>
    
    {% if hotels: %}
        {% if hotels.cities %}
            <h3>Hotels in {{ hotel[1] }}</h3>
        {% else %}
            <h3>All Hotels</h3>
        {% endif %}
        <table class="table table-responsive table-striped text-center">
            <tr>
                <th>Hotel</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Capacity</th>
                <th></th>
            </tr>
            {% for hotel in hotels %}
                <tr>
                    <td>{{ hotel[2] }}</td>
                    <td>{{ hotel[3] }}</td>
                    <td>{{ hotel[4] }}</td>
                    <td>{{ hotel[5] }}</td>
                    <td>
                        <a href="{{ url_for('room_page', hotel_id=hotel[0]) }}" class="btn btn-primary">View Rooms</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No hotels found.</p>
    {% endif %}
</div>

{% endblock %}
